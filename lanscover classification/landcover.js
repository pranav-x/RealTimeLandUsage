var crop =
    /* color: #bf04c2 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([80.41381296720182, 26.8959413807349]),
            {
                "landcover": 4,
                "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41390952672636, 26.89638152136988]),
            {
                "landcover": 4,
                "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([80.4141884764639, 26.896194940223154]),
            {
                "landcover": 4,
                "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([80.4147624691931, 26.896281054636876]),
            {
                "landcover": 4,
                "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41482147779142, 26.896606375162833]),
            {
                "landcover": 4,
                "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41529354657804, 26.89663507987015]),
            {
                "landcover": 4,
                "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41564759816801, 26.896558533967763]),
            {
                "landcover": 4,
                "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41633960809385, 26.89646763564134]),
            {
                "landcover": 4,
                "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41662392224943, 26.896300191164347]),
            {
                "landcover": 4,
                "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([80.4172140082327, 26.896070552620806]),
            {
                "landcover": 4,
                "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41759488191282, 26.895965301465647]),
            {
                "landcover": 4,
                "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41392561998045, 26.895716525618177]),
            {
                "landcover": 4,
                "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([80.4135393818823, 26.895477317555827]),
            {
                "landcover": 4,
                "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41505751218473, 26.89552037504442]),
            {
                "landcover": 4,
                "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41327652539884, 26.896218860900213]),
            {
                "landcover": 4,
                "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([80.41235384549772, 26.896481988013544]),
            {
                "landcover": 4,
                "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([81.270924966837, 26.541694489487984]),
            {
                "landcover": 4,
                "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([81.27054945757492, 26.54100342292146]),
            {
                "landcover": 4,
                "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([81.27214805414779, 26.54157931201601]),
            {
                "landcover": 4,
                "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([81.27236263086898, 26.542351958676164]),
            {
                "landcover": 4,
                "system:index": "19"
            })]),
    river =
        /* color: #d63000 */
        /* shown: false */
        ee.FeatureCollection(
            [ee.Feature(
                ee.Geometry.Point([78.5760107077041, 28.034897156314425]),
                {
                    "landcover": 5,
                    "system:index": "0"
                }),
            ee.Feature(
                ee.Geometry.Point([78.57347870239404, 28.035825205491328]),
                {
                    "landcover": 5,
                    "system:index": "1"
                }),
            ee.Feature(
                ee.Geometry.Point([78.5520127665834, 28.04654313646448]),
                {
                    "landcover": 5,
                    "system:index": "2"
                }),
            ee.Feature(
                ee.Geometry.Point([78.42434633065689, 28.16397796541295]),
                {
                    "landcover": 5,
                    "system:index": "3"
                }),
            ee.Feature(
                ee.Geometry.Point([78.43125570107925, 28.163864462802422]),
                {
                    "landcover": 5,
                    "system:index": "4"
                }),
            ee.Feature(
                ee.Geometry.Point([78.43404519845474, 28.15523791219367]),
                {
                    "landcover": 5,
                    "system:index": "5"
                }),
            ee.Feature(
                ee.Geometry.Point([78.28541920038435, 28.3226774809352]),
                {
                    "landcover": 5,
                    "system:index": "6"
                }),
            ee.Feature(
                ee.Geometry.Point([78.28262970300887, 28.325208572314814]),
                {
                    "landcover": 5,
                    "system:index": "7"
                }),
            ee.Feature(
                ee.Geometry.Point([78.17318540543035, 29.95790427639397]),
                {
                    "landcover": 5,
                    "system:index": "8"
                }),
            ee.Feature(
                ee.Geometry.Point([78.18022352188542, 29.958238909631643]),
                {
                    "landcover": 5,
                    "system:index": "9"
                }),
            ee.Feature(
                ee.Geometry.Point([78.18073850601628, 29.960618491278723]),
                {
                    "landcover": 5,
                    "system:index": "10"
                }),
            ee.Feature(
                ee.Geometry.Point([93.25324723953993, 26.68327662185431]),
                {
                    "landcover": 5,
                    "system:index": "11"
                }),
            ee.Feature(
                ee.Geometry.Point([93.11523149246962, 26.629274129704243]),
                {
                    "landcover": 5,
                    "system:index": "12"
                }),
            ee.Feature(
                ee.Geometry.Point([92.861172654579, 26.743385667328404]),
                {
                    "landcover": 5,
                    "system:index": "13"
                }),
            ee.Feature(
                ee.Geometry.Point([92.77740190262587, 26.559892582053063]),
                {
                    "landcover": 5,
                    "system:index": "14"
                }),
            ee.Feature(
                ee.Geometry.Point([92.63526628250868, 26.610858351543207]),
                {
                    "landcover": 5,
                    "system:index": "15"
                }),
            ee.Feature(
                ee.Geometry.Point([80.36314370431178, 28.5173148770637]),
                {
                    "landcover": 5,
                    "system:index": "16"
                }),
            ee.Feature(
                ee.Geometry.Point([80.36541821755641, 28.51378906880288]),
                {
                    "landcover": 5,
                    "system:index": "17"
                }),
            ee.Feature(
                ee.Geometry.Point([80.3667485932278, 28.509886031289906]),
                {
                    "landcover": 5,
                    "system:index": "18"
                }),
            ee.Feature(
                ee.Geometry.Point([80.36962704840816, 28.495192371890077]),
                {
                    "landcover": 5,
                    "system:index": "19"
                })]),
    barren_area =
        /* color: #98ff00 */
        /* shown: false */
        ee.FeatureCollection(
            [ee.Feature(
                ee.Geometry.Point([74.23095896063218, 14.891065058812364]),
                {
                    "landcover": 0,
                    "system:index": "0"
                }),
            ee.Feature(
                ee.Geometry.Point([74.22769739447007, 14.896124837453732]),
                {
                    "landcover": 0,
                    "system:index": "1"
                }),
            ee.Feature(
                ee.Geometry.Point([74.22409250555405, 14.893346121271511]),
                {
                    "landcover": 0,
                    "system:index": "2"
                }),
            ee.Feature(
                ee.Geometry.Point([74.22499372778306, 14.889820832746938]),
                {
                    "landcover": 0,
                    "system:index": "3"
                }),
            ee.Feature(
                ee.Geometry.Point([74.23250391302476, 14.889613461037545]),
                {
                    "landcover": 0,
                    "system:index": "4"
                }),
            ee.Feature(
                ee.Geometry.Point([74.26443292913804, 14.890733265897401]),
                {
                    "landcover": 0,
                    "system:index": "5"
                }),
            ee.Feature(
                ee.Geometry.Point([74.2568798285521, 14.902718960727418]),
                {
                    "landcover": 0,
                    "system:index": "6"
                }),
            ee.Feature(
                ee.Geometry.Point([74.25490572271714, 14.901516274054636]),
                {
                    "landcover": 0,
                    "system:index": "7"
                }),
            ee.Feature(
                ee.Geometry.Point([74.25499155340562, 14.904294884818553]),
                {
                    "landcover": 0,
                    "system:index": "8"
                }),
            ee.Feature(
                ee.Geometry.Point([74.25812437353501, 14.904128998615397]),
                {
                    "landcover": 0,
                    "system:index": "9"
                }),
            ee.Feature(
                ee.Geometry.Point([74.23147394476304, 14.885963686290859]),
                {
                    "landcover": 0,
                    "system:index": "10"
                }),
            ee.Feature(
                ee.Geometry.Point([74.94158368175036, 15.497124469663495]),
                {
                    "landcover": 0,
                    "system:index": "11"
                }),
            ee.Feature(
                ee.Geometry.Point([74.94102578227526, 15.493609255574665]),
                {
                    "landcover": 0,
                    "system:index": "12"
                }),
            ee.Feature(
                ee.Geometry.Point([74.96471505229479, 15.507628400099772]),
                {
                    "landcover": 0,
                    "system:index": "13"
                }),
            ee.Feature(
                ee.Geometry.Point([77.27032893854421, 14.547969922901126]),
                {
                    "landcover": 0,
                    "system:index": "14"
                }),
            ee.Feature(
                ee.Geometry.Point([77.2690843935613, 14.547159903534313]),
                {
                    "landcover": 0,
                    "system:index": "15"
                }),
            ee.Feature(
                ee.Geometry.Point([72.82851130922337, 27.3727057684966]),
                {
                    "landcover": 0,
                    "system:index": "16"
                }),
            ee.Feature(
                ee.Geometry.Point([70.44247765913362, 27.387500761850184]),
                {
                    "landcover": 0,
                    "system:index": "17"
                }),
            ee.Feature(
                ee.Geometry.Point([70.96982140913362, 26.112165840568178]),
                {
                    "landcover": 0,
                    "system:index": "18"
                }),
            ee.Feature(
                ee.Geometry.Point([71.1203006158001, 25.44957216926414]),
                {
                    "landcover": 0,
                    "system:index": "19"
                })]),
    lake =
        /* color: #0b4a8b */
        /* shown: false */
        ee.FeatureCollection(
            [ee.Feature(
                ee.Geometry.Point([78.73218615972428, 29.562265174652648]),
                {
                    "landcover": 1,
                    "system:index": "0"
                }),
            ee.Feature(
                ee.Geometry.Point([78.72308810674576, 29.566781837516192]),
                {
                    "landcover": 1,
                    "system:index": "1"
                }),
            ee.Feature(
                ee.Geometry.Point([78.72587760412125, 29.56991725328596]),
                {
                    "landcover": 1,
                    "system:index": "2"
                }),
            ee.Feature(
                ee.Geometry.Point([78.72029860937027, 29.56778966034404]),
                {
                    "landcover": 1,
                    "system:index": "3"
                }),
            ee.Feature(
                ee.Geometry.Point([78.72261603795914, 29.56439288397373]),
                {
                    "landcover": 1,
                    "system:index": "4"
                }),
            ee.Feature(
                ee.Geometry.Point([79.45861865674699, 29.38713695778664]),
                {
                    "landcover": 1,
                    "system:index": "5"
                }),
            ee.Feature(
                ee.Geometry.Point([79.4570522466823, 29.388987902830337]),
                {
                    "landcover": 1,
                    "system:index": "6"
                }),
            ee.Feature(
                ee.Geometry.Point([79.45637633001054, 29.38752023705027]),
                {
                    "landcover": 1,
                    "system:index": "7"
                }),
            ee.Feature(
                ee.Geometry.Point([79.45902635251726, 29.38608059526898]),
                {
                    "landcover": 1,
                    "system:index": "8"
                }),
            ee.Feature(
                ee.Geometry.Point([79.46022798215593, 29.38511770660481]),
                {
                    "landcover": 1,
                    "system:index": "9"
                }),
            ee.Feature(
                ee.Geometry.Point([79.45989538823808, 29.38688455358058]),
                {
                    "landcover": 1,
                    "system:index": "10"
                }),
            ee.Feature(
                ee.Geometry.Point([79.46138669645036, 29.385379463648437]),
                {
                    "landcover": 1,
                    "system:index": "11"
                }),
            ee.Feature(
                ee.Geometry.Point([76.39344019620579, 9.609251924083525]),
                {
                    "landcover": 1,
                    "system:index": "12"
                }),
            ee.Feature(
                ee.Geometry.Point([76.4080314132468, 9.609590429539184]),
                {
                    "landcover": 1,
                    "system:index": "13"
                }),
            ee.Feature(
                ee.Geometry.Point([76.38318808248866, 9.585402315972804]),
                {
                    "landcover": 1,
                    "system:index": "14"
                }),
            ee.Feature(
                ee.Geometry.Point([76.59058944796755, 8.980541459214237]),
                {
                    "landcover": 1,
                    "system:index": "15"
                }),
            ee.Feature(
                ee.Geometry.Point([85.41559563413459, 19.79671513417646]),
                {
                    "landcover": 1,
                    "system:index": "16"
                }),
            ee.Feature(
                ee.Geometry.Point([85.30229912534553, 19.747606634802946]),
                {
                    "landcover": 1,
                    "system:index": "17"
                }),
            ee.Feature(
                ee.Geometry.Point([85.2624736858924, 19.719168487820703]),
                {
                    "landcover": 1,
                    "system:index": "18"
                }),
            ee.Feature(
                ee.Geometry.Point([85.20548210874396, 19.670682713326762]),
                {
                    "landcover": 1,
                    "system:index": "19"
                })]),
    settlement =
        /* color: #ffc82d */
        /* shown: false */
        ee.FeatureCollection(
            [ee.Feature(
                ee.Geometry.Point([77.12192974455667, 28.637268603690686]),
                {
                    "landcover": 2,
                    "system:index": "0"
                }),
            ee.Feature(
                ee.Geometry.Point([77.12196193106485, 28.636731867929534]),
                {
                    "landcover": 2,
                    "system:index": "1"
                }),
            ee.Feature(
                ee.Geometry.Point([77.12223015196633, 28.635696054312913]),
                {
                    "landcover": 2,
                    "system:index": "2"
                }),
            ee.Feature(
                ee.Geometry.Point([77.1186574495585, 28.63563013855491]),
                {
                    "landcover": 2,
                    "system:index": "3"
                }),
            ee.Feature(
                ee.Geometry.Point([77.11726270087075, 28.636581204766212]),
                {
                    "landcover": 2,
                    "system:index": "4"
                }),
            ee.Feature(
                ee.Geometry.Point([77.11513839133096, 28.636392875507862]),
                {
                    "landcover": 2,
                    "system:index": "5"
                }),
            ee.Feature(
                ee.Geometry.Point([77.11474142439675, 28.63599738296509]),
                {
                    "landcover": 2,
                    "system:index": "6"
                }),
            ee.Feature(
                ee.Geometry.Point([77.11433372862649, 28.635234643137302]),
                {
                    "landcover": 2,
                    "system:index": "7"
                }),
            ee.Feature(
                ee.Geometry.Point([77.11862526305032, 28.63494272889675]),
                {
                    "landcover": 2,
                    "system:index": "8"
                }),
            ee.Feature(
                ee.Geometry.Point([77.13700387078111, 28.64193626860092]),
                {
                    "landcover": 2,
                    "system:index": "9"
                }),
            ee.Feature(
                ee.Geometry.Point([77.13686439591234, 28.64166320500378]),
                {
                    "landcover": 2,
                    "system:index": "10"
                }),
            ee.Feature(
                ee.Geometry.Point([77.13740083771532, 28.641898604698735]),
                {
                    "landcover": 2,
                    "system:index": "11"
                }),
            ee.Feature(
                ee.Geometry.Point([77.14207861023729, 28.640005976202477]),
                {
                    "landcover": 2,
                    "system:index": "12"
                }),
            ee.Feature(
                ee.Geometry.Point([77.14244339066332, 28.6409099224303]),
                {
                    "landcover": 2,
                    "system:index": "13"
                }),
            ee.Feature(
                ee.Geometry.Point([77.14330169754808, 28.64100408304777]),
                {
                    "landcover": 2,
                    "system:index": "14"
                }),
            ee.Feature(
                ee.Geometry.Point([77.6599374051105, 27.4923104015463]),
                {
                    "landcover": 2,
                    "system:index": "15"
                }),
            ee.Feature(
                ee.Geometry.Point([83.35302639803194, 18.579448058966804]),
                {
                    "landcover": 2,
                    "system:index": "16"
                }),
            ee.Feature(
                ee.Geometry.Point([83.35899163088106, 18.576946299640998]),
                {
                    "landcover": 2,
                    "system:index": "17"
                }),
            ee.Feature(
                ee.Geometry.Point([83.36266089281344, 18.575339459247548]),
                {
                    "landcover": 2,
                    "system:index": "18"
                }),
            ee.Feature(
                ee.Geometry.Point([83.35178185304903, 18.57432246383111]),
                {
                    "landcover": 2,
                    "system:index": "19"
                })]),
    forest =
        /* color: #00ffff */
        /* shown: false */
        ee.FeatureCollection(
            [ee.Feature(
                ee.Geometry.Point([74.5786595174642, 15.06219375351849]),
                {
                    "landcover": 3,
                    "system:index": "0"
                }),
            ee.Feature(
                ee.Geometry.Point([74.5182347127767, 14.934849166148016]),
                {
                    "landcover": 3,
                    "system:index": "1"
                }),
            ee.Feature(
                ee.Geometry.Point([74.5621800252767, 14.62678902998892]),
                {
                    "landcover": 3,
                    "system:index": "2"
                }),
            ee.Feature(
                ee.Geometry.Point([75.6113743612142, 13.6359935669526]),
                {
                    "landcover": 3,
                    "system:index": "3"
                }),
            ee.Feature(
                ee.Geometry.Point([75.6443333455892, 13.507839027615223]),
                {
                    "landcover": 3,
                    "system:index": "4"
                }),
            ee.Feature(
                ee.Geometry.Point([90.82401322439173, 25.347417623411765]),
                {
                    "landcover": 3,
                    "system:index": "5"
                }),
            ee.Feature(
                ee.Geometry.Point([90.78710602834681, 25.354708762216564]),
                {
                    "landcover": 3,
                    "system:index": "6"
                }),
            ee.Feature(
                ee.Geometry.Point([90.86830185964564, 25.377044833119623]),
                {
                    "landcover": 3,
                    "system:index": "7"
                }),
            ee.Feature(
                ee.Geometry.Point([90.85302399709681, 25.351916463124837]),
                {
                    "landcover": 3,
                    "system:index": "8"
                }),
            ee.Feature(
                ee.Geometry.Point([90.84993409231166, 25.328955115353416]),
                {
                    "landcover": 3,
                    "system:index": "9"
                }),
            ee.Feature(
                ee.Geometry.Point([90.68840073659877, 25.343228898076323]),
                {
                    "landcover": 3,
                    "system:index": "10"
                }),
            ee.Feature(
                ee.Geometry.Point([79.48946722842079, 29.25596853262202]),
                {
                    "landcover": 3,
                    "system:index": "11"
                }),
            ee.Feature(
                ee.Geometry.Point([79.51058157778603, 29.25956283252786]),
                {
                    "landcover": 3,
                    "system:index": "12"
                }),
            ee.Feature(
                ee.Geometry.Point([79.51573141909462, 29.256867119440376]),
                {
                    "landcover": 3,
                    "system:index": "13"
                }),
            ee.Feature(
                ee.Geometry.Point([79.58164938784462, 29.24069134899837]),
                {
                    "landcover": 3,
                    "system:index": "14"
                }),
            ee.Feature(
                ee.Geometry.Point([79.06992682314736, 29.357982506919928]),
                {
                    "landcover": 3,
                    "system:index": "15"
                }),
            ee.Feature(
                ee.Geometry.Point([84.33413671341843, 18.99301102524456]),
                {
                    "landcover": 3,
                    "system:index": "16"
                }),
            ee.Feature(
                ee.Geometry.Point([84.33234499779648, 18.994522584609978]),
                {
                    "landcover": 3,
                    "system:index": "17"
                }),
            ee.Feature(
                ee.Geometry.Point([84.32960914460129, 18.99214872012923]),
                {
                    "landcover": 3,
                    "system:index": "18"
                }),
            ee.Feature(
                ee.Geometry.Point([84.32930873719162, 18.994715332804038]),
                {
                    "landcover": 3,
                    "system:index": "19"
                })]),
    l8 = ee.ImageCollection("LANDSAT/LC08/C01/T1"),
    gaul = ee.FeatureCollection("FAO/GAUL_SIMPLIFIED_500m/2015/level2");



var center = ee.Geometry.Point([25.3932305454494, 86.42228272778313])
var colors = { 'transparent': '#11ffee00', 'gray': '#F8F9FA' };



var TITLE_STYLE = {
    fontWeight: '100',
    fontSize: '32px',
    padding: '8px',
    color: '#616161',
    backgroundColor: colors.transparent,
};

var SUBTITLE_STYLE = {
    fontWeight: '350',
    fontSize: '16px',
    padding: '8px',
    color: '#616161',
    textAlign: 'center',
    //maxWidth: '450px',
    backgroundColor: colors.transparent,
};

var PARAGRAPH_STYLE = {
    fontSize: '14px',
    fontWeight: '50',
    color: '#616161',
    padding: '8px',
    maxWidth: '500px',
    backgroundColor: colors.transparent,
};

var BUTTON_STYLE = {
    fontSize: '14px',
    fontWeight: '100',
    color: '#616161',
    padding: '8px',
    backgroundColor: colors.transparent,
};

var SELECT_STYLE = {
    fontSize: '14px',
    fontWeight: '50',
    color: '#616161',
    padding: '2px',
    backgroundColor: colors.transparent,
    width: '80px'
};

var LABEL_STYLE = {
    fontWeight: '50',
    textAlign: 'center',
    fontSize: '14px',
    padding: '2px',
    backgroundColor: colors.transparent,
};





var infoPanel = ui.Panel({
    layout: ui.Panel.Layout.flow(),
    style: {
        stretch: 'horizontal',
        height: '100%',
        width: '450px',
        backgroundColor: colors.gray
    }
});

var mappingPanel = ui.Map({
    center: { 'lat': 25.3932305454494, 'lon': 86.42228272778313, 'zoom': 5 }

});


ui.root.clear() // This is important to do to remove the "normal" GEE map
ui.root.add(ui.SplitPanel(mappingPanel, infoPanel));

//ui.root.add() is where you are adding panels to the EE window 

var graphPanel = ui.Panel({ style: { backgroundColor: colors.transparent } });


infoPanel.add(ui.Label('Real Time Land Usage Monitoring Tool', TITLE_STYLE));


var app_description = 'When working on Remote Sensing applications, many operations require calculating area. For example, one needs to calculate area covered by each class after supervised classification or find out how much area within a region is affected after a disaster.';

infoPanel.add(ui.Label(app_description, PARAGRAPH_STYLE));


infoPanel.insert(2, ui.Label('PARAMETERS :', SUBTITLE_STYLE))


var year_list = [
    { label: '2013', value: 2013 },
    { label: '2014', value: 2014 },
    { label: '2015', value: 2015 },
    { label: '2016', value: 2016 },
    { label: '2017', value: 2017 },
    { label: '2018', value: 2018 },
    { label: '2019', value: 2019 }
];



var state_list = [
    { label: 'Andhra Pradesh', value: 'Andhra Pradesh' },
    { label: 'Arunachal Pradesh', value: 'Arunachal Pradesh' },
    { label: 'Assam', value: 'Assam' },
    { label: 'Bihar', value: 'Bihar' },
    { label: 'Chhattisgarh', value: 'Chhattisgarh' },
    { label: 'Delhi', value: 'Delhi' },
    { label: 'Goa', value: 'Goa' },
    { label: 'Gujarat', value: 'Gujarat' },
    { label: 'Haryana', value: 'Haryana' },
    { label: 'Himachal Pradesh', value: 'Himachal Pradesh' },
    { label: 'Jharkhand', value: 'Jharkhand' },
    { label: 'Karnataka', value: 'Karnataka' },
    { label: 'Kerala', value: 'Kerala' },
    { label: 'Madhya Pradesh', value: 'Madhya Pradesh' },
    { label: 'Maharashtra', value: 'Maharashtra' },
    { label: 'Manipur', value: 'Manipur' },
    { label: 'Mizoram', value: 'Mizoram' },
    { label: 'Nagaland', value: 'Nagaland' },
    { label: 'Odisha', value: 'Orissa' },
    { label: 'Punjab', value: 'Punjab' },
    { label: 'Rajasthan', value: 'Rajasthan' },
    { label: 'Sikkim', value: 'Sikkim' },
    { label: 'Tamil Nadu', value: 'Tamil Nadu' },
    { label: 'Telangana', value: 'Telangana' },
    { label: 'Tripura', value: 'Tripura' },
    { label: 'Uttarakhand', value: 'Uttarakhand' },
    { label: 'UP', value: 'Uttar Pradesh' },
    { label: 'West Bengal', value: 'West Bengal' },
    { label: 'Aksai Chin(DIS)', value: 'Aksai Chin' },
    { label: 'Arunachal Pradesh(DIS)', value: 'Arunachal Pradesh' },
    { label: 'Jammu and Kashmir(DIS)', value: 'Jammu and Kashmir' }

];



var class_list = [
    { label: 'Barren Land', value: 0 },
    { label: 'Lakes', value: 1 },
    { label: 'Settlements', value: 2 },
    { label: 'Forest', value: 3 },
    { label: 'Crop Land', value: 4 },
    { label: 'River', value: 5 }
];





infoPanel.insert(3, ui.Label('Select a year :', SUBTITLE_STYLE))

var selectedYear = '2016';

var year = ui.Select({ items: year_list, placeholder: 'Select a year', onChange: function (val) { selectedYear = val }, value: 2016, style: SELECT_STYLE })

infoPanel.add(year);


infoPanel.insert(5, ui.Label('Select a state :', SUBTITLE_STYLE));

var selectedState = 'Bihar';

var state = ui.Select({ items: state_list, placeholder: 'Select a state', onChange: function (val) { selectedState = val }, value: 'Bihar', style: SELECT_STYLE })

infoPanel.add(state);




var runButton = ui.Button({ label: 'Perform Classification', style: { width: '125px', maxWidth: '250px', color: '#616161' } });


infoPanel.add(runButton)





infoPanel.insert(9, ui.Label('Select a class type :', SUBTITLE_STYLE));

var selectedClass = 3;
var selectedClassName = 'Forest';

var classType = ui.Select({
    items: class_list, placeholder: 'Select a class type: ', onChange: function (val) {
        selectedClass = val;

        if (val === 0)
            selectedClassName = 'Barren Land';
        else if (val == 1)
            selectedClassName = 'Lakes';
        else if (val == 2)
            selectedClassName = 'Settlements';
        else if (val == 3)
            selectedClassName = 'Forest';
        else if (val == 4)
            selectedClassName = 'Crop Land';
        else if (val == 5)
            selectedClassName = 'River';


    }
    , value: 3, style: SELECT_STYLE
});

infoPanel.add(classType);



// OPACITY SLIDER

var opacity = 0.5;

var opacLabel = ui.Label('Opacity:', LABEL_STYLE)
var opacSlider = ui.Slider({ min: 0, max: 1, value: 0.5, onChange: function (val) { opacity = val; }, style: { width: '125px', backgroundColor: colors.transparent } })
infoPanel.add(opacLabel).add(opacSlider)



var classButton = ui.Button({ label: 'Show Area', style: { width: '125px', maxWidth: '250px', color: '#616161' } });

infoPanel.add(classButton);

var label = ui.Label('');
infoPanel.add(label);




infoPanel.insert(20, ui.Label('Calculate Difference', SUBTITLE_STYLE));

infoPanel.insert(22, ui.Label('Select a start year :', SUBTITLE_STYLE))

var startYear = '2018';
var endYear = '2019';


var syear = ui.Select({ items: year_list, placeholder: 'Select a year', onChange: function (val) { startYear = val }, value: 2018, style: SELECT_STYLE })

infoPanel.add(syear);

infoPanel.insert(24, ui.Label('Select an end year :', SUBTITLE_STYLE))


var eyear = ui.Select({ items: year_list, placeholder: 'Select a year', onChange: function (val) { endYear = val }, value: 2019, style: SELECT_STYLE })

infoPanel.add(eyear);

var calculateDiff = ui.Button({ label: 'Calculate', style: { width: '125px', maxWidth: '250px', color: '#616161' } });

infoPanel.add(calculateDiff);



var labelDiff = ui.Label('');
infoPanel.add(labelDiff);









var selectedArea;
var reqState;
var indiaCollection

var showLand = runButton.onClick(function () {


    label.setValue('');
    var layers = mappingPanel.layers()
    layers.forEach(function (x) {
        mappingPanel.remove(x)
    })

    var startDate = selectedYear + '-01-01';
    var endDate = selectedYear + '-12-31';


    var india = gaul.filter(
        ee.Filter.eq('ADM0_CODE', 115))



    if (selectedState == 'Aksai Chin' || selectedState == 'Arunachal Pradesh' || selectedState == 'Jammu and Kashmir') {

        reqState = gaul.filter(
            ee.Filter.eq('ADM0_NAME', selectedState))

    }

    else {

        reqState = gaul.filter(
            ee.Filter.eq('ADM1_NAME', selectedState))

    }
    var dataset = ee.FeatureCollection('USDOS/LSIB_SIMPLE/2017');
    var India = dataset.filter(ee.Filter.eq('country_na', 'India'));
    // Remove the clouds
    var cloud_free = ee.Algorithms.Landsat.simpleComposite({
        collection: l8.filterDate(startDate, endDate),
        asFloat: true
    })

    var bands = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B10', 'B11'];



    //  Merge those feature collections
    var merged_collection = barren_area.merge(crop).merge(lake).merge(forest).merge(settlement).merge(river);


    var training = cloud_free.select(bands).sampleRegions({
        collection: merged_collection,
        properties: ['landcover'],
        scale: 30
    })



    // Create the classifier and classify the image
    var classifier = ee.Classifier.randomForest(10).train({
        features: training,
        classProperty: 'landcover',
        inputProperties: bands
    });
    // Create the classified image.
    var classified = cloud_free.select(bands).classify(classifier);


    //  Use a confusion matrix to test accuracy!
    print("accuracy of classifier ", classifier.confusionMatrix().accuracy())



    indiaCollection = classified.clip(reqState);
    //print(classified);
    //print(indiaCollection);
    print(selectedClass)
    selectedArea = indiaCollection;

    mappingPanel.centerObject(centert, 5)
    mappingPanel.addLayer(indiaCollection, { min: 0, max: 5, palette: ['red', 'green', 'blue', 'yellow', 'purple', 'orange'] },
        'classified image');


});

var dict1 = {
    0: ['red', 'white', 'white', 'white', 'white', 'white'],
    1: ['white', 'green', 'white', 'white', 'white', 'white'],
    2: ['white', 'white', 'blue', 'white', 'white', 'white'],
    3: ['white', 'white', 'white', 'yellow', 'white', 'white'],
    4: ['white', 'white', 'white', 'white', 'purple', 'white'],
    5: ['white', 'white', 'white', 'white', 'white', 'orange']
};

var dict2 = {
    0: ['orange', 'white', 'white', 'white', 'white', 'white'],
    1: ['white', 'purple', 'white', 'white', 'white', 'white'],
    2: ['white', 'white', 'yellow', 'white', 'white', 'white'],
    3: ['white', 'white', 'white', 'blue', 'white', 'white'],
    4: ['white', 'white', 'white', 'white', 'red', 'white'],
    5: ['white', 'white', 'white', 'white', 'white', 'green']
};


var dlis = [dict1, dict2]


classButton.onClick(function () {
    var layers = mappingPanel.layers()
    layers.forEach(function (x) {
        mappingPanel.remove(x)
    })
    label.setValue('Processing .....');
    var category = selectedArea.select('classification').eq(selectedClass);//vegetation has 1 value in your case

    //Calculate the pixel area in square kilometer
    var area_category = category.multiply(ee.Image.pixelArea()).divide(1000 * 1000);

    //Reducing the statistics for your study area
    var stat = area_category.reduceRegion({
        reducer: ee.Reducer.sum(),
        geometry: reqState,
        scale: 500,
        maxPixels: 1e13
    });


    var calculatedArea = stat.get('classification');
    //print(calculatedArea)
    calculatedArea.evaluate(function (result) {

        var res = selectedClassName + ' cover in ' + selectedState + ' is: ' + result + ' SqKm.';
        // print(res)
        label.setValue(res);
    });

    var shown = true;

    mappingPanel.addLayer(indiaCollection, { min: 0, max: 5, palette: dict1[selectedClass] },
        'classified image', shown, opacity);
});








function doclassification(year, op, pal) {
    //print(year)
    var startDate = year + '-01-01';
    var endDate = year + '-12-31';
    reqState = gaul.filter(
        ee.Filter.eq('ADM1_NAME', selectedState))
    var cloud_free = ee.Algorithms.Landsat.simpleComposite({
        collection: l8.filterDate(startDate, endDate),
        asFloat: true
    })


    var bands = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B10', 'B11'];




    var merged_collection = barren_area.merge(crop).merge(lake).merge(forest).merge(settlement).merge(river);


    var training = cloud_free.select(bands).sampleRegions({
        collection: merged_collection,
        properties: ['landcover'],
        scale: 30
    })

    var classifier = ee.Classifier.randomForest(10).train({
        features: training,
        classProperty: 'landcover',
        inputProperties: bands
    });
    // Create the classified image.
    var classified = cloud_free.select(bands).classify(classifier);


    indiaCollection = classified.clip(reqState);
    //print(classified);
    //print(indiaCollection);
    //print(selectedClass)
    selectedArea = indiaCollection;


    mappingPanel.addLayer(indiaCollection, { min: 0, max: 5, palette: dlis[pal][selectedClass], opacity: op },
        'classified image');

}







function AREA() {

    // label.setValue('');
    var category = selectedArea.select('classification').eq(selectedClass);//vegetation has 1 value in your case

    //Calculate the pixel area in square kilometer
    var area_category = category.multiply(ee.Image.pixelArea()).divide(1000 * 1000);

    //Reducing the statistics for your study area
    var stat = area_category.reduceRegion({
        reducer: ee.Reducer.sum(),
        geometry: reqState,
        scale: 500,
        maxPixels: 1e13
    });


    var calculatedArea = stat.get('classification');
    //print(calculatedArea)
    return calculatedArea



}



infoPanel.add(graphPanel)


calculateDiff.onClick(function () {
    mappingPanel.clear()
    labelDiff.setValue('Processing.....')
    graphPanel.clear();
    doclassification(startYear, 0.6, 0);
    var area1, area2, ans1, ans2;
    area1 = AREA();
    doclassification(endYear, 0.4, 1);

    area2 = AREA()

    //print(area1);
    // print(area2);
    var d = area2 - area1;


    area1.evaluate(function (result1) {
        result1 = Number(result1)
        area2.evaluate(function (result2) {
            result2 = Number(result2);

            print(result2 - result1)
            if (result2 - result1 >= 0)
                labelDiff.setValue(result2 - result1 + ' sq kms area of ' + selectedClassName + ' increased')
            else
                labelDiff.setValue(result1 - result2 + ' sq kms area of ' + selectedClassName + ' increased')

            var dataTable = {
                cols: [{ id: 'year', label: 'Year', type: 'number' },
                { id: 'area', label: 'Area', type: 'number' }],
                rows: [{ c: [{ v: Number(startYear) }, { v: result1 }] },
                { c: [{ v: Number(endYear) }, { v: result2 }] }]
            };
            var options = {
                title: 'Area calculation',
                vAxis: { title: 'Year' },
                legend: { position: 'none' },
                hAxis: {
                    title: 'Area',
                    logScale: true
                }
            };
            // Make a BarChart from the table and the options.
            var chart = ui.Chart(dataTable, 'BarChart', options);
            graphPanel.add(chart)
        });

    });
})
